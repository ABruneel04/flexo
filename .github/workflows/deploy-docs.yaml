name: Deploy MkDocs to GitHub Pages

on:
 push:
   branches:
     - main
 workflow_dispatch:

jobs:
 deploy:
   runs-on: ubuntu-latest
   permissions:
     contents: write
   steps:
     - name: Checkout code
       uses: actions/checkout@v3
       with:
         fetch-depth: 0

     - name: Set up Python
       uses: actions/setup-python@v3
       with:
         python-version: '3.9'

     - name: Install dependencies
       run: |
         python -m pip install --upgrade pip
         pip install mkdocs mkdocs-material mkdocstrings[python] mkdocs-gen-files mkdocs-literate-nav mkdocs-section-index

     - name: Configure Git
       run: |
         git config --global user.name 'github-actions[bot]'
         git config --global user.email 'github-actions[bot]@users.noreply.github.com'

     - name: Build and deploy
       run: mkdocs gh-deploy --force